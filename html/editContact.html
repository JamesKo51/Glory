<html>
    <head>
        <title>COP 4331 LAMP Stack Project</title>
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <script type="text/javascript" src="js/md5.js"></script>
        <script type="text/javascript" src="js/code.js"></script>
        <link href="css/signupstyles.css" rel="stylesheet">
    <link href="css/paradise.css" rel="stylesheet">
        <link href="https://fonts.googleapis.com/css?family=Courgette" rel="stylesheet">
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
        <script type="text/javascript">
            document.addEventListener('DOMContentLoaded', function () {readCookie();});
        </script>

        <style>
        .center {
            text-align: left;
            width: 800px;
            padding: 20px;
            box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19);
        }

        .hideform {
            display: none;
        }
        </style>

    </head>
    <body>

		<div  id = "box" class="container">
		<input id="search-input" class="searchbar" type = "text" placeholder = "Search Contact To Edit">
		<table id="data-tabel" class = "table" onkeypress="loadTable();">
			<thead>
				<tr>
          <th>Contact</th>
					<th>First Name</th>
					<th>Last Name</th>
					<th>Phone Number</th>
					<th>Email Address</th>
				</tr>
			</thead>
			<tbody id="data-output">
				</tbody>
		</table>
   
    <input type = "text" id="SearchPhone" placeholder="Phone Number To Edit">
    <br>
    <button id="show" class="buttons" onclick="searchSpecificContact();">Pull Up Contact</button>
    <script>
		$('#show').on('click', function () {
		    $('.center').show();
		    $(this).hide();
		})

		$('#close').on('click', function () {
		    $('.center').hide();
		    $('#show').show();
		})
		</script>
   <br>
    <span class="text" style="justify-content: center" id="SearchResult"></span>
    <br>
		</div>

		<script>
		jQuery(function($) {
		  var input = $('#search-input');
		  input.on('keydown', function() {
		    var key = event.keyCode || event.charCode;
		    if( key == 8 || key == 46 )
				document.getElementById('search-input').value = ''
		  });
		});
		</script>

		<script>
		var stringTabel = ""
		$('#search-input').on('keyup', function()
		{

			var tabelArray = $('#data-tabel').tableToJSON();
			stringTabel = JSON.stringify(tabelArray)
			var value = $(this).val()
			var arraytbl = searchTable(value, stringTabel)
			buildTable(arraytbl)

			if(value.length == 0) {
				 var table = document.getElementById('data-output')
				 table.innerHTML = ''
				 loadTable();

      }

		})

		function buildTable(data)
		{
		var table = document.getElementById('data-output')
		table.innerHTML = ''

			for (var i = 0; i < data.length; i++){
					var contact = `Contact-${i}`
					var fName = `First Name-${i}`
					var lName = `Last Name-${i}`
					var Phone = `Phone Number-${i}`
					var Email = `Email Address-${i}`

					var row = `<tr>
													<td>${data[i]["Contact"]}</td>
													<td>${data[i]["First Name"]}</td>
													<td>${data[i]["Last Name"]}</td>
													<td>${data[i]["Phone Number"]}</td>
													<td>${data[i]["Email Address"]}</td>
                          
										 </tr>`
					table.innerHTML += row
			}
		}

		function searchTable(value, obj) {
			var filteredData = []

			var data = JSON.parse(obj);

			for (var i = 0; i < data.length; i++)
			{
				value = value.toLowerCase()
				var fName = data[i]["First Name"].toLowerCase()
				var lName = data[i]["Last Name"].toLowerCase()
				var flName = fName + " " + lName;
				var Phone = data[i]["Phone Number"].toLowerCase()
				if(fName.includes(value) || lName.includes(value) ||  Phone.includes(value) || flName.includes(value))
				{
					filteredData.push(data[i])
				}
			}
			return filteredData;
		}
		</script>
   
    <script>
      
    </script>
		<script src="//code.jquery.com/jquery-1.9.1.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/table-to-json@1.0.0/lib/jquery.tabletojson.min.js" integrity="sha256-H8xrCe0tZFi/C2CgxkmiGksqVaxhW0PFcUKZJZo1yNU=" crossorigin="anonymous"></script>

    <div class= "center hideform">
    <label for="nFirstName">First Name</label><br>
      <input type = "text" id="First" placeholder=""><br>
      
      <label for="nLastName">Last Name</label><br>
      <input type = "text" id="Last" placeholder=""><br>
      
      <label for="nPhone">Phone</label><br>
      <input type = "text" id="Phone" placeholder=""><br>
      
      <label for="nEmail">Email</label><br>
      <input type = "text" id="Email" placeholder=""><br>

      <text class="text" style="display: none" id="ID" placeholder="ID"></text><br>
      
		<button class="button" id="editbutton" onclick="doEditContact();"> Edit & Save </button>
    </div>
    
</body>
</html>
